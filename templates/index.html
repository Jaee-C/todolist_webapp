{% extends "layout.html" %}

{% block body %}

    <form action="/" method="post">
        <input type="text" autofocus autocomplete="off" id ="task_name" name="new_task" placeholder="New task">
        <input type="submit" name="add_task" class="btn btn-outline-primary" value="Add">
    </form>
    <form action="/" method="post">
    {% if entries %}
        {% for task, status in entries %}
            {% if status == "Incomplete" %}
                <div class="form-check"> 
                    <input type="checkbox" class="form-check-input" onclick="toggleComplete('{{ task }}')"> 
                    <label class="form-check-label">{{ task }}</label><span class="close">&#10006;</span> 
                </div> 
            {% else %}
                <div class="form-check"> 
                    <input type="checkbox" class="form-check-input" onclick="toggleComplete('{{ task }}')" checked> 
                    <label class="form-check-label">{{ task }}</label><span class="close">&#10006;</span> 
                </div>
            {% endif %}
        {% endfor %}
    {% endif %}
    </form>
    <div class="form-check"> 
        <input type="checkbox" class="form-check-input"> 
        <label class="form-check-label">byebye</label><span class="close">&#10006;</span>
    </div>
    <div class="form-check"> 
        <input type="checkbox" class="form-check-input"> 
        <label class="form-check-label">hello</label><span class="close">&#10006;</span>
    </div>

    <script>
        function toggleComplete(elem) {
            fetch(`/update-todo/${elem}`, {
                method: 'post'
            });
        }


    </script>

{% endblock %}